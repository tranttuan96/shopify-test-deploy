import{c as R,a as b,h as g,n as h,b as $,d as ee,l as v,o as te,p as se,i as L,e as ie,s as ae,f as oe,g as ce,r as K,t as W,v as V,y as ne,m as C,u as y,q as O,j as Z,k as de,w as re,x as le,z as ue,A as he,B as M}from"./index.esm-66056b1d.js";import{_ as l,a as u,b as z,z as ge}from"./theme-74fe61d9.js";/* empty css              */const P=e=>e.selectedAccessKeysIds,ve=e=>e.notifications,T=R(e=>e.accessKeysList.data,e=>e.map(t=>Object.assign(Object.assign({},t),{expireTimeFormatted:t!=null&&t.expireTime?new Date(1e3*((t==null?void 0:t.expireTime)||0)).toLocaleString():"Never",createdTimeFormatted:new Date(1e3*((t==null?void 0:t.createdTime)||0)).toLocaleString(),status:t!=null&&t.expireTime&&new Date(1e3*((t==null?void 0:t.expireTime)||0))<new Date?"expired":t==null?void 0:t.status}))),S=R(P,T,(e,t)=>t.filter(s=>e.includes(s.id))),ye=R(P,e=>!!e.length),me=R(S,e=>e.every(t=>t.editable)),I=R(me,ye,(e,t)=>e&&t);R(P,e=>e.length===1);const B=R(S,e=>e.length===1?e[0].name:`${e.length} access keys`),A=e=>(...t)=>s=>{s.addCase(e.pending,(a,i)=>{t.forEach(({onPending:o})=>{o==null||o(a,i)})}),s.addCase(e.fulfilled,(a,i)=>{t.forEach(({onFulfilled:o})=>{o==null||o(a,i)})}),s.addCase(e.rejected,(a,i)=>{t.forEach(({onRejected:o})=>{o==null||o(a,i)})})},k=e=>({onFulfilled:t=>{e(t).loading=!1},onPending:t=>{e(t).loading=!0,e(t).error=null},onRejected:(t,s)=>{e(t).loading=!1,e(t).error=s.error}}),j=({getErrorMsg:e,getSuccessMsg:t})=>({onFulfilled:(s,a)=>{t&&s.notifications.push({type:"success",msg:t(a)})},onRejected:(s,a)=>{e&&s.notifications.push({type:"error",msg:e(a)})}}),G=b("accessKeys/create",(e,{extra:{api:t}})=>t.accesskey.create(e)),pe=A(G)({onFulfilled:(e,t)=>{e.accessKeysList.data.unshift(t.payload.key)}},k(e=>e.createAccessKey),j({getSuccessMsg:()=>"Access Key created successfully",getErrorMsg:e=>{var t;return`
      <div>
        <div>Failed to create access key</div>
        ${(t=e.error)===null||t===void 0?void 0:t.message}
      </div>`}})),D={action:G,reducer:pe},J=b("accessKeys/delete",(e,{extra:{api:t}})=>t.accesskey.deleteBatch(e)),fe=A(J)({onFulfilled:(e,t)=>{e.accessKeysList.data=e.accessKeysList.data.filter(s=>!t.meta.arg.includes(s.id)),e.selectedAccessKeysIds=[]}},k(e=>e.deleteAccessKey),j({getSuccessMsg:e=>M(e.meta.arg.length)`${["",e.meta.arg.length]} ${["A","a"]}ccess key${["","s"]} deleted successfully`,getErrorMsg:e=>M(e.meta.arg.length)`Failed to delete access key${["","s"]}`})),q={action:J,reducer:fe},Q=b("accessKeys/search",(e,{extra:{api:t},getState:s})=>{const a=s().searchParams;return t.accesskey.search(Object.assign(Object.assign({},a),e))}),Re=A(Q)({onPending:(e,t)=>{e.searchParams=Object.assign(Object.assign({},e.searchParams),t.meta.arg)},onFulfilled:(e,t)=>{e.accessKeysList.data=t.payload}},k(e=>e.accessKeysList)),F={action:Q,reducer:Re},X=b("accessKeys/activate",(e,{extra:{api:t}})=>t.accesskey.activate(e)),we=A(X)({onFulfilled:(e,t)=>{e.accessKeysList.data.forEach(s=>{t.meta.arg.includes(s.id)&&(s.status="active")})}},k(e=>e.activateAccessKey),j({getSuccessMsg:e=>M(e.meta.arg.length)`${["",e.meta.arg.length]} ${["A","a"]}ccess key${["","s"]} activated successfully`,getErrorMsg:e=>M(e.meta.arg.length)`Failed to activate access key${["","s"]}`})),E={action:X,reducer:we},Y=b("accessKeys/deactivate",(e,{extra:{api:t}})=>t.accesskey.deactivate(e)),Me=A(Y)({onFulfilled:(e,t)=>{e.accessKeysList.data.forEach(s=>{t.meta.arg.includes(s.id)&&(s.status="inactive")})}},k(e=>e.deactivateAccessKey),j({getSuccessMsg:e=>M(e.meta.arg.length)`${["",e.meta.arg.length]} ${["A","a"]}ccess key${["","s"]} deactivated successfully`,getErrorMsg:e=>M(e.meta.arg.length)`Failed to deactivate access key${["","s"]}`})),N={action:Y,reducer:Me},U=b("tenant/getTenantRoles",(e,{extra:{api:t}})=>t.tenant.getTenantRoles()),H={action:U,reducer:A(U)({onFulfilled:(e,t)=>{e.tenantRoles.data=t.payload.roles}},k(e=>e.tenantRoles))},_={accessKeysList:{data:[],loading:!1,error:null},createAccessKey:{loading:!1,error:null},activateAccessKey:{loading:!1,error:null},deactivateAccessKey:{loading:!1,error:null},deleteAccessKey:{loading:!1,error:null},tenantRoles:{loading:!1,error:null,data:[]},searchParams:{text:"",sort:[]},selectedAccessKeysIds:[],notifications:[]},x={search:"/v1/mgmt/accesskey/search",deleteBatch:"/v1/mgmt/accesskey/delete/batch",create:"/v1/mgmt/accesskey/create",deactivate:"/v1/mgmt/accesskey/deactivate/batch",activate:"/v1/mgmt/accesskey/activate/batch"},be={roles:"/v1/mgmt/role/all"},w=e=>l(void 0,void 0,void 0,function*(){const t=yield e.text(),s=JSON.parse(t);if(!e.ok){const a=`${s.errorDescription}${s.errorMessage?`: ${s.errorMessage}`:""}`;throw Error(a||`${e.status} ${e.statusText}`)}e.json=()=>Promise.resolve(s),e.text=()=>Promise.resolve(t)}),Ke=({text:e,sort:t}={})=>l(void 0,void 0,void 0,function*(){return new Promise(s=>{const a=[];for(let i=1;i<10;i+=1)a.push({id:`access-key-id-${i}`,name:`Access Key ${i}`,createdBy:`User ${i}`,editable:!0,expireTime:new Date().getTime()/1e3+2592e3,createdTime:new Date().getTime()/1e3,roleNames:[`Role ${i}`],status:"active",clientId:`Client ID ${i}`,boundUserId:`User ${i}`});t.forEach(i=>{a.sort((o,n)=>{var d,c;return i.desc?(c=n[i.field])===null||c===void 0?void 0:c.localeCompare(o[i.field]):(d=o[i.field])===null||d===void 0?void 0:d.localeCompare(n[i.field])})}),s(a.filter(i=>i.name.toLowerCase().includes(e.toLowerCase())||i.createdBy.toLowerCase().includes(e.toLowerCase())))})}),Ae=({name:e,roleNames:t,userId:s},a)=>l(void 0,void 0,void 0,function*(){const i=Math.random().toString(10).substring(15);return new Promise(o=>{o({cleartext:Math.random().toString(20).substring(2),key:{id:`access-key-id-${i}`,name:e||`Access Key ${i}`,createdBy:s||`User ${i}`,editable:!0,expireTime:a,createdTime:new Date().getTime()/1e3,roleNames:t,status:"active",clientId:`Client ID ${i}`,boundUserId:s||`User ${i}`}})})}),ke=()=>l(void 0,void 0,void 0,function*(){}),xe=()=>l(void 0,void 0,void 0,function*(){}),We=()=>l(void 0,void 0,void 0,function*(){}),Ce=e=>new Promise(t=>{const s=[];for(let a=1;a<5;a+=1)s.push({name:`Role ${a}`,description:`Role description ${a}`,createdTime:new Date,permissionNames:[`Permission ${a}`],tenantId:e});t({roles:s})}),Se=({httpClient:e,tenant:t,mock:s})=>({search:({page:a,limit:i=1e4,text:o,sort:n}={})=>l(void 0,void 0,void 0,function*(){if(s)return Ke({page:a,limit:i,text:o,sort:n});const d=yield e.post(x.search,{limit:i,page:a,text:o,sort:n},{queryParams:{tenant:t}});return yield w(d),(yield d.json()).keys}),deleteBatch:a=>l(void 0,void 0,void 0,function*(){if(s)return We();const i=yield e.post(x.deleteBatch,{ids:a},{queryParams:{tenant:t}});return yield w(i),i.json()}),create:({name:a,expiration:i,roleNames:o,userId:n})=>l(void 0,void 0,void 0,function*(){const d=new Date;d.setDate(d.getDate()+ +i);const c=i[0]==="0"?0:Math.floor(d.getTime()/1e3);if(s)return Ae({name:a,expiration:i,roleNames:o,userId:n},c);const r=yield e.post(x.create,{name:a,expireTime:c,roleNames:o,userId:n},{queryParams:{tenant:t}});return yield w(r),yield r.json()}),activate:a=>l(void 0,void 0,void 0,function*(){if(s)return ke();const i=yield e.post(x.activate,{ids:a},{queryParams:{tenant:t}});return yield w(i),yield i.json()}),deactivate:a=>l(void 0,void 0,void 0,function*(){if(s)return xe();const i=yield e.post(x.deactivate,{ids:a},{queryParams:{tenant:t}});return yield w(i),yield i.json()})}),$e=({httpClient:e,tenant:t,mock:s})=>({getTenantRoles:()=>l(void 0,void 0,void 0,function*(){if(s)return Ce(t);const a=yield e.get(be.roles,{queryParams:{tenant:t}});return yield w(a),a.json()})}),je=g(e=>{var t,s,a,i;const o=h(se,te,v,ee,$({tenant:$.missingAttrValidator}))(e);return i=class extends o{constructor(){super(...arguments),t.add(this),s.set(this,void 0)}get tenant(){return this.getAttribute("tenant")}get widgetId(){return this.getAttribute("widget-id")}get mock(){return this.getAttribute("mock")}get api(){return u(this,s,"f")||u(this,t,"m",a).call(this),u(this,s,"f")}init(){const n=Object.create(null,{init:{get:()=>super.init}});var d;return l(this,void 0,void 0,function*(){yield(d=n.init)===null||d===void 0?void 0:d.call(this),this.observeAttributes(["project-id","base-url","tenant"],()=>{u(this,s,"f")&&u(this,t,"m",a).call(this)})})}},s=new WeakMap,t=new WeakSet,a=function(){this.logger.debug("creating an sdk instance"),z(this,s,((n,d,c,r)=>{const f=ge(Object.assign(Object.assign({},n),{persistTokens:!0,baseHeaders:{"x-descope-widget-type":"access-key-management-widget","x-descope-widget-id":r,"x-descope-widget-version":"0.1.113"}}));return{accesskey:Se({httpClient:f.httpClient,tenant:d,mock:c}),tenant:$e({httpClient:f.httpClient,tenant:d,mock:c})}})({projectId:this.projectId,baseUrl:this.baseUrl},this.tenant,this.mock==="true",this.widgetId),"f")},i}),m=g(e=>{const t=h(ie({name:"widget",initialState:_,reducers:{setSelectedAccessKeysIds:(s,{payload:a})=>{s.selectedAccessKeysIds=a},clearNotifications:s=>{s.notifications=[]}},extraReducers:s=>{D.reducer(s),q.reducer(s),F.reducer(s),E.reducer(s),N.reducer(s),H.reducer(s)},asyncActions:{searchAccessKeys:F.action,createAccessKey:D.action,activateAccessKeys:E.action,deactivateAccessKeys:N.action,deleteAccessKeys:q.action,getTenantRoles:H.action}}),L,v,je)(e);return class extends t{constructor(...s){super(...s),this.state=_,this.subscribe(a=>{this.logger.debug("State update:",a),this.state=a})}}}),Te=g(e=>{const t=h(ae,$({"widget-id":$.missingAttrValidator}))(e);return class extends t{get widgetId(){return this.getAttribute("widget-id")}fetchWidgetPage(s){return l(this,void 0,void 0,function*(){return(yield this.fetchStaticResource(`access-key-management-widget/${this.widgetId}/${s}`,"text")).body})}}}),p=g(e=>{var t,s,a;return a=class extends h(v,L,ce,oe,Te,m)(e){constructor(){super(...arguments),t.add(this)}onWidgetRootReady(){return l(this,void 0,void 0,function*(){})}init(){const i=Object.create(null,{init:{get:()=>super.init}});var o;return l(this,void 0,void 0,function*(){yield(o=i.init)===null||o===void 0?void 0:o.call(this),yield Promise.all([u(this,t,"m",s).call(this),this.actions.searchAccessKeys(),this.actions.getTenantRoles()]),this.onWidgetRootReady()})}},t=new WeakSet,s=function(){return l(this,void 0,void 0,function*(){const i=K(yield this.fetchWidgetPage("root.html"));yield this.loadDescopeUiComponents(i),this.contentRootElement.append(i.content.cloneNode(!0))})},a}),Le=g(e=>{var t,s,a,i,o;return o=class extends h(m,v,p)(e){constructor(){super(...arguments),t.add(this),a.set(this,W(n=>{this.accessKeysTable.data=n})),i.set(this,V((n,d)=>{const c=[],{value:r}=d;if(r){const f=n.path;c.push({field:f,desc:r==="desc"})}this.actions.searchAccessKeys({sort:c})}))}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var d;return l(this,void 0,void 0,function*(){yield(d=n.onWidgetRootReady)===null||d===void 0?void 0:d.call(this),u(this,t,"m",s).call(this),this.accessKeysTable.columns.forEach(c=>{c.onSortDirectionChange(r=>{u(this,i,"f").call(this,r.target,r.detail)})}),u(this,a,"f").call(this,T(this.state)),this.subscribe(u(this,a,"f").bind(this),T)})}},a=new WeakMap,i=new WeakMap,t=new WeakSet,s=function(){var n;this.accessKeysTable=new ne((n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector('[data-id="access-keys-table"]'),{logger:this.logger}),this.accessKeysTable.onSelectedItemsChange(d=>{this.actions.setSelectedAccessKeysIds(d.detail.value.map(({id:c})=>c))})},o}),Oe=g(e=>{var t,s,a;return a=class extends h(m,C,v,p)(e){constructor(){super(...arguments),t.add(this)}onWidgetRootReady(){const i=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var o;return l(this,void 0,void 0,function*(){yield(o=i.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),yield u(this,t,"m",s).call(this)})}},t=new WeakSet,s=function(){var i;return l(this,void 0,void 0,function*(){this.activateAccessKeysModal=this.createModal(),this.activateAccessKeysModal.setContent(K(yield this.fetchWidgetPage("activate-access-keys-modal.html"))),new y(()=>{var c;return(c=this.activateAccessKeysModal.ele)===null||c===void 0?void 0:c.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.activateAccessKeysModal.close()),new y(()=>{var c;return(c=this.activateAccessKeysModal.ele)===null||c===void 0?void 0:c.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const c=S(this.state);this.actions.activateAccessKeys(c==null?void 0:c.map(r=>r.id)),this.activateAccessKeysModal.close()});const d=new O((i=this.activateAccessKeysModal.ele)===null||i===void 0?void 0:i.querySelector('[data-id="body-text"]'),{logger:this.logger});this.activateAccessKeysModal.beforeOpen=()=>{const c=B(this.state);d.text=`Activate ${c}?`}})},a}),Pe=g(e=>{var t,s,a,i;return i=class extends h(v,p,m,Oe)(e){constructor(){super(...arguments),t.add(this),a.set(this,W(o=>{o?this.activateButton.enable():this.activateButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var n;return l(this,void 0,void 0,function*(){yield(n=o.onWidgetRootReady)===null||n===void 0?void 0:n.call(this),u(this,t,"m",s).call(this),this.subscribe(u(this,a,"f").bind(this),I)})}},a=new WeakMap,t=new WeakSet,s=function(){var o;this.activateButton=new y((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="activate-access-keys"]'),{logger:this.logger}),this.activateButton.disable(),this.activateButton.onClick(()=>{this.activateAccessKeysModal.open()})},i}),Ie=g(e=>{var t,s,a;return a=class extends h(m,C,Z,v,p)(e){constructor(){super(...arguments),t.add(this)}onWidgetRootReady(){const i=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var o;return l(this,void 0,void 0,function*(){yield(o=i.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),u(this,t,"m",s).call(this)})}},t=new WeakSet,s=function(){return l(this,void 0,void 0,function*(){this.createdAccessKeyModal=this.createModal(),this.createdAccessKeyModal.setContent(K(yield this.fetchWidgetPage("created-access-key-modal.html"))),new y(()=>{var o;return(o=this.createdAccessKeyModal.ele)===null||o===void 0?void 0:o.querySelector('[data-id="modal-close"]')},{logger:this.logger}).onClick(()=>{navigator.clipboard.writeText(this.getFormData(this.createdAccessKeyModal.ele)["generated-key"]),this.resetFormData(this.createdAccessKeyModal.ele),this.createdAccessKeyModal.close()})})},a}),Be=g(e=>{var t,s,a,i,o;return o=class extends h(m,C,Z,v,p,Ie)(e){constructor(){super(...arguments),t.add(this),s.set(this,void 0),i.set(this,()=>l(this,void 0,void 0,function*(){var n,d;yield u(this,s,"f").setData((d=this.state,(n=d.tenantRoles.data||[])===null||n===void 0?void 0:n.map(({name:c})=>({value:c,label:c}))))}))}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var d;return l(this,void 0,void 0,function*(){yield(d=n.onWidgetRootReady)===null||d===void 0?void 0:d.call(this),u(this,t,"m",a).call(this)})}},s=new WeakMap,i=new WeakMap,t=new WeakSet,a=function n(){return l(this,void 0,void 0,function*(){this.createAccessKeyModal=this.createModal(),this.createAccessKeyModal.setContent(K(yield this.fetchWidgetPage("create-access-key-modal.html"))),new y(()=>{var r;return(r=this.createAccessKeyModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>{this.createAccessKeyModal.close(),this.resetFormData(this.createAccessKeyModal.ele)}),new y(()=>{var r;return(r=this.createAccessKeyModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>l(this,void 0,void 0,function*(){var r;if(this.validateForm(this.createAccessKeyModal.ele)){const f=yield this.actions.createAccessKey(Object.assign({},this.getFormData(this.createAccessKeyModal.ele)));this.createAccessKeyModal.close(),this.setFormData(this.createdAccessKeyModal.ele,{"generated-key":(r=f==null?void 0:f.payload)===null||r===void 0?void 0:r.cleartext}),this.createdAccessKeyModal.open()}})),z(this,s,new de(()=>{var r;return(r=this.createAccessKeyModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="roles-multiselect"]')},{logger:this.logger}),"f"),u(this,i,"f").call(this),this.createAccessKeyModal.afterClose=()=>{u(this,t,"m",n).call(this)}})},o}),De=g(e=>{var t,s,a;return a=class extends h(v,Be,p)(e){constructor(){super(...arguments),t.add(this)}onWidgetRootReady(){const i=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var o;return l(this,void 0,void 0,function*(){yield(o=i.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),u(this,t,"m",s).call(this)})}},t=new WeakSet,s=function(){var i;this.createButton=new y((i=this.shadowRoot)===null||i===void 0?void 0:i.querySelector('[data-id="create-access-key"]'),{logger:this.logger}),this.createButton.onClick(()=>this.createAccessKeyModal.open())},a}),qe=g(e=>{var t,s,a;return a=class extends h(m,C,v,p)(e){constructor(){super(...arguments),t.add(this)}onWidgetRootReady(){const i=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var o;return l(this,void 0,void 0,function*(){yield(o=i.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),yield u(this,t,"m",s).call(this)})}},t=new WeakSet,s=function(){var i;return l(this,void 0,void 0,function*(){this.deactivateAccessKeysModal=this.createModal(),this.deactivateAccessKeysModal.setContent(K(yield this.fetchWidgetPage("deactivate-access-keys-modal.html"))),new y(()=>{var c;return(c=this.deactivateAccessKeysModal.ele)===null||c===void 0?void 0:c.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.deactivateAccessKeysModal.close()),new y(()=>{var c;return(c=this.deactivateAccessKeysModal.ele)===null||c===void 0?void 0:c.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const c=S(this.state);this.actions.deactivateAccessKeys(c==null?void 0:c.map(r=>r.id)),this.deactivateAccessKeysModal.close()});const d=new O((i=this.deactivateAccessKeysModal.ele)===null||i===void 0?void 0:i.querySelector('[data-id="body-text"]'),{logger:this.logger});this.deactivateAccessKeysModal.beforeOpen=()=>{const c=B(this.state);d.text=`Deactivate ${c}?`}})},a}),Fe=g(e=>{var t,s,a,i;return i=class extends h(v,p,m,qe)(e){constructor(){super(...arguments),t.add(this),a.set(this,W(o=>{o?this.deactivateButton.enable():this.deactivateButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var n;return l(this,void 0,void 0,function*(){yield(n=o.onWidgetRootReady)===null||n===void 0?void 0:n.call(this),u(this,t,"m",s).call(this),this.subscribe(u(this,a,"f").bind(this),I)})}},a=new WeakMap,t=new WeakSet,s=function(){var o;this.deactivateButton=new y((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="deactivate-access-keys"]'),{logger:this.logger}),this.deactivateButton.disable(),this.deactivateButton.onClick(()=>{this.deactivateAccessKeysModal.open()})},i}),Ee=g(e=>{var t,s,a;return a=class extends h(m,C,v,p)(e){constructor(){super(...arguments),t.add(this)}onWidgetRootReady(){const i=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var o;return l(this,void 0,void 0,function*(){yield(o=i.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),yield u(this,t,"m",s).call(this)})}},t=new WeakSet,s=function(){var i;return l(this,void 0,void 0,function*(){this.deleteAccessKeysModal=this.createModal(),this.deleteAccessKeysModal.setContent(K(yield this.fetchWidgetPage("delete-access-keys-modal.html"))),new y(()=>{var c;return(c=this.deleteAccessKeysModal.ele)===null||c===void 0?void 0:c.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.deleteAccessKeysModal.close()),new y(()=>{var c;return(c=this.deleteAccessKeysModal.ele)===null||c===void 0?void 0:c.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const c=S(this.state);this.actions.deleteAccessKeys(c==null?void 0:c.map(r=>r.id)),this.deleteAccessKeysModal.close()});const d=new O((i=this.deleteAccessKeysModal.ele)===null||i===void 0?void 0:i.querySelector('[data-id="body-text"]'),{logger:this.logger});this.deleteAccessKeysModal.beforeOpen=()=>{const c=B(this.state);d.text=`Delete ${c}?`}})},a}),Ne=g(e=>{var t,s,a,i;return i=class extends h(v,p,m,Ee)(e){constructor(){super(...arguments),t.add(this),a.set(this,W(o=>{o?this.deleteButton.enable():this.deleteButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var n;return l(this,void 0,void 0,function*(){yield(n=o.onWidgetRootReady)===null||n===void 0?void 0:n.call(this),u(this,t,"m",s).call(this),this.subscribe(u(this,a,"f").bind(this),I)})}},a=new WeakMap,t=new WeakSet,s=function(){var o;this.deleteButton=new y((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="delete-access-keys"]'),{logger:this.logger}),this.deleteButton.disable(),this.deleteButton.onClick(()=>{this.deleteAccessKeysModal.open()})},i}),Ue=g(e=>{var t,s,a,i;return i=class extends h(v,p,m)(e){constructor(){super(...arguments),t.add(this),s.set(this,V(()=>{this.actions.searchAccessKeys({text:this.searchInput.value})}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});var n;return l(this,void 0,void 0,function*(){yield(n=o.onWidgetRootReady)===null||n===void 0?void 0:n.call(this),u(this,t,"m",a).call(this)})}},s=new WeakMap,t=new WeakSet,a=function(){var o;this.searchInput=new re((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="search-input"]'),{logger:this.logger}),this.searchInput.onInput(u(this,s,"f"))},i}),He={success:new DOMParser().parseFromString(`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Checkmark">
<path id="Shape" d="M10.0485 15.6396C9.5799 15.171 8.8201 15.171 8.35147 15.6396C7.88284 16.1082 7.88284 16.868 8.35147 17.3367L12.7072 21.6924C13.1759 22.1611 13.9357 22.1611 14.4043 21.6924L24.7152 11.3815C25.1838 10.9129 25.1838 10.1531 24.7152 9.68448C24.2466 9.21585 23.4868 9.21585 23.0181 9.68448L13.5558 19.1469L10.0485 15.6396Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild,error:new DOMParser().parseFromString(`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Icon">
<path id="Vector" d="M15.9998 26.6558C10.1118 26.6558 5.34375 21.8878 5.34375 15.9998C5.34375 10.1118 10.1118 5.34375 15.9998 5.34375C21.8878 5.34375 26.6558 10.1118 26.6558 15.9998C26.6558 21.8878 21.8878 26.6558 15.9998 26.6558ZM15.9998 24.4798C20.6718 24.4798 24.4798 20.7038 24.4798 15.9998C24.4798 11.3278 20.7038 7.51975 15.9998 7.51975C11.3278 7.51975 7.51975 11.2958 7.51975 15.9998C7.51975 20.6718 11.2958 24.4798 15.9998 24.4798ZM15.3278 9.34375H16.6718C17.0558 9.34375 17.3438 9.63175 17.3118 9.98375L16.9598 16.9278C16.9598 17.1838 16.7678 17.3438 16.5438 17.3438H15.4558C15.2318 17.3438 15.0398 17.1518 15.0398 16.9278L14.6878 9.98375C14.6878 9.63175 14.9758 9.34375 15.3278 9.34375ZM15.4558 19.4558H16.5438C16.9278 19.4558 17.2158 19.7438 17.1838 20.1278V21.1838C17.1838 21.5678 16.8958 21.8558 16.5438 21.8558H15.4558C15.0718 21.8558 14.7838 21.5678 14.7838 21.1838V20.1278C14.7838 19.7438 15.0718 19.4558 15.4558 19.4558Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild},_e=g(e=>{var t,s,a,i,o;return o=class extends h(v,m,le,L)(e){constructor(){super(...arguments),t.add(this),i.set(this,W(n=>{n.length&&(n.forEach(({type:d,msg:c})=>{const r=u(this,t,"m",a).call(this,d);r.setContent(u(this,t,"m",s).call(this,{type:d,msg:c})),r.show()}),setTimeout(()=>this.actions.clearNotifications()))}))}init(){const n=Object.create(null,{init:{get:()=>super.init}});var d;return l(this,void 0,void 0,function*(){yield(d=n.init)===null||d===void 0?void 0:d.call(this),this.subscribe(u(this,i,"f").bind(this),ve)})}},i=new WeakMap,t=new WeakSet,s=function({type:n,msg:d}){const c=He[n],r=Object.assign(new DOMParser().parseFromString(`<svg width="2em" height="2em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Icon">
<path id="Shape" d="M10.6712 12L7.27521 8.60406C6.90826 8.23711 6.90826 7.64216 7.27521 7.27521C7.64216 6.90826 8.23711 6.90826 8.60406 7.27521L12 10.6712L15.3959 7.27521C15.7629 6.90826 16.3578 6.90826 16.7248 7.27521C17.0917 7.64216 17.0917 8.23711 16.7248 8.60406L13.3288 12L16.7248 15.3959C17.0917 15.7629 17.0917 16.3578 16.7248 16.7248C16.3578 17.0917 15.7629 17.0917 15.3959 16.7248L12 13.3288L8.60406 16.7248C8.23711 17.0917 7.64216 17.0917 7.27521 16.7248C6.90826 16.3578 6.90826 15.7629 7.27521 15.3959L10.6712 12Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild,{slot:"close"});return`${(c==null?void 0:c.outerHTML)||""}${d}${r.outerHTML}`},a=function(n){return this.createNotification({mode:n,duration:n==="error"?0:3e3,position:"bottom-start",size:"sm"})},o}),Ve=g(e=>class extends h(he,ue,Le,De,Ne,Ue,Pe,Fe,_e)(e){init(){const t=Object.create(null,{init:{get:()=>super.init}});var s;return l(this,void 0,void 0,function*(){yield(s=t.init)===null||s===void 0?void 0:s.call(this)})}}),Ze=h(e=>class extends Ve(e){})(HTMLElement);customElements.define("descope-access-key-management-widget",Ze);export{Ze as default};
